<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

	<META HTTP-EQUIV="pragma" CONTENT="no-cache">
	<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate">
	<META HTTP-EQUIV="expires" CONTENT="0">

	<link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
	<link rel="stylesheet" href="bootstrap/css/animate.css">
	<title></title>
	<style>
		::-webkit-scrollbar {display:none}

		/*让网页中的内容不可选择*/
		*{
			moz-user-select: -moz-none;
			-moz-user-select: none;
			-o-user-select:none;
			-khtml-user-select:none;
			/*-webkit-user-select:none;*/
			-ms-user-select:none;
			user-select:none;
		}
		label{
			font-weight: bold;
			cursor:pointer;
		}
		.btn.btn-lg.btn-default{
			background-color:#D4D4D4;
		}
		body {
			background-color:#FAFAFA;
		}

	</style>

	<script src="bootstrap/js/jquery.min.js"></script>
	<script src="bootstrap/js/bootstrap.js"></script>
	<script type="text/javascript" src="lhgcore.js"></script>
	<script type="text/javascript" src="lhgcalendar.js"></script>
</head>

<body scroll="no" >
<div class="container-fiuled " style="cursor:pointer;">
	<div class="row clearfix" style="margin-right:1%;">
		<div class="col-md-12 column">
			<nav class="navbar navbar-default navbar-fixed-top" role="navigation">



				<div class="btn-group btn-group-justified animated fadeInDown ">
					<a href="" onclick="subTableControll.backToTable()" class="btn btn-lg btn-default"><em class="glyphicon glyphicon-chevron-left"></em>  返回</a>
					<a href="" onclick="load()" class="btn btn-lg btn-default"><em class="glyphicon glyphicon-refresh"></em>  刷新</a>
					<a href=""  onclick="saveSubForm()" class="btn btn-lg btn-default"><em class="glyphicon glyphicon-list-alt"></em>  保存</a>

				</div>



			</nav>
		</div>
	</div>
</div>

<div class="container animated fadeInDown " >
	<div class="row clearfix" style="margin-top:70px;">
		<div class="col-md-12 column" >
			<div  id="form1" class="form-inline" ></div>
		</div>
	</div>
</div>







<link href="aform.css" rel="stylesheet" type="text/css" />
<script src="aform.js" type="text/javascript"></script>
<script src="aform.config.js" type="text/javascript"></script>
<script src="aform.plugin.js" type="text/javascript"></script>


<script type="text/javascript">

	function load() {
        var value=subTableControll.getFormValue();
        var fields=subTableControll.getFormFields();
        cbGenForm(value,fields);
    }

    //保存表单
    function saveSubForm()
    {
        var formInfo=jf.getJsonString();
        //alert(formInfo);
        var save=subTableControll.saveSubTableForm(formInfo);
        if(save==1)
		{
		    alert("保存成功");
		}else
		{
            alert("保存失败");
		}
    }

    function generate(input,config)
    {
        config = typeof config == "string" ? eval("(" + config + ")") : config;
        input = typeof input == "string" ? eval("(" + input + ")") : input;
        jf = new AForm("form1", config);
        jf.render(input);
    }

    function cbGenForm(data,conf)
    {
        conf = conf || {};
        generate(data,conf);

        try
        {
            //显示json字符串,防止ie8展示unicode格式的汉字
            eval("g_data = '"+JSON.stringify(data)+"';");
        }
        catch(ex)
        {
            g_data = JSON.stringify(data);
        }

        try
        {
            //显示json字符串,防止ie8展示unicode格式的汉字
            eval("g_conf = '"+JSON.stringify(conf)+"';");
        }
        catch(ex)
        {
            g_conf = JSON.stringify(conf);
        }


    }
</script>

</body>



</html>